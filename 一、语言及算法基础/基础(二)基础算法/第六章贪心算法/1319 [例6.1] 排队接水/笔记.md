# é¢˜ç›®æ ‡é¢˜ï¼š[1319: ã€ä¾‹6.1ã€‘æ’é˜Ÿæ¥æ°´]

## æ—¶é—´é™åˆ¶: 1000 ms   å†…å­˜é™åˆ¶: 65536 KB

## é¢˜ç›®éš¾åº¦ï¼šâ­â­

## ç®—æ³•æ ‡ç­¾ï¼š[è´ªå¿ƒã€æ’åºã€C++ åŸºç¡€]

## ã€é¢˜ç›®æè¿°ã€‘

æœ‰nä¸ªäººåœ¨ä¸€ä¸ªæ°´é¾™å¤´å‰æ’é˜Ÿæ¥æ°´ï¼Œå‡å¦‚æ¯ä¸ªäººæ¥æ°´çš„æ—¶é—´ä¸º$ T_i $ï¼Œè¯·ç¼–ç¨‹æ‰¾å‡ºè¿™nä¸ªäººæ’é˜Ÿçš„ä¸€ç§é¡ºåºï¼Œä½¿å¾—nä¸ªäººçš„å¹³å‡ç­‰å¾…æ—¶é—´æœ€å°ã€‚

## ã€è¾“å…¥ã€‘

å…±ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œä¸ºnï¼ˆ$ 1 \leq n \leq 1000 $ï¼‰ï¼›ç¬¬äºŒè¡Œåˆ†åˆ«è¡¨ç¤ºç¬¬1ä¸ªäººåˆ°ç¬¬nä¸ªäººæ¯äººçš„æ¥æ°´æ—¶é—´$( T_1, T_2, \dots, T_n $)ï¼Œæ¯ä¸ªæ•°æ®ä¹‹é—´æœ‰1ä¸ªç©ºæ ¼ã€‚

## ã€è¾“å‡ºã€‘

æœ‰ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œä¸ºä¸€ç§æ’é˜Ÿé¡ºåºï¼Œå³1åˆ°nçš„ä¸€ç§æ’åˆ—ï¼›ç¬¬äºŒè¡Œä¸ºè¿™ç§æ’åˆ—æ–¹æ¡ˆä¸‹çš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼ˆè¾“å‡ºç»“æœç²¾ç¡®åˆ°å°æ•°ç‚¹åä¸¤ä½ï¼‰ã€‚

## ã€è¾“å…¥æ ·ä¾‹ã€‘

```text
10  
56 12 1 99 1000 234 33 55 99 812
```

## ã€è¾“å‡ºæ ·ä¾‹ã€‘

```text
3 2 7 8 1 4 9 6 10 5  
291.90  
```

## æ ¸å¿ƒç®—æ³•æ€æƒ³

### 1ï¸âƒ£ ç®—æ³•ç±»å‹

* **è´ªå¿ƒç®—æ³•**
* **æ’åºä¼˜åŒ–é—®é¢˜**
* ç­‰ä»·äºæ“ä½œç³»ç»Ÿä¸­çš„ **SPT / SJFï¼ˆShortest Processing Time Firstï¼‰è°ƒåº¦æ¨¡å‹**

---

### 2ï¸âƒ£ è´ªå¿ƒç­–ç•¥ç»“è®º

> **æŒ‰æ¥æ°´æ—¶é—´ä»å°åˆ°å¤§æ’åºï¼Œè®©æ¥æ°´æ—¶é—´çŸ­çš„äººå…ˆæ¥æ°´ï¼Œå¯ä»¥ä½¿å¹³å‡ç­‰å¾…æ—¶é—´æœ€å°ã€‚**

---

## æ•°å­¦æ¨å¯¼ä¸æœ€ä¼˜æ€§è¯æ˜

### 1ï¸âƒ£ æ•°å­¦å»ºæ¨¡

è®¾æ¥æ°´æ—¶é—´ä¸ºï¼š
$T_1, T_2, \dots, T_n$

è®¾ä¸€ç§æ’é˜Ÿé¡ºåºä¸ºæ’åˆ—ï¼š

$\pi = (\pi_1, \pi_2, \dots, \pi_n)$

å…¶ä¸­ $ \pi_i $ è¡¨ç¤ºç¬¬ $ i $ ä¸ªæ¥æ°´çš„äººã€‚

---

### 2ï¸âƒ£ ç­‰å¾…æ—¶é—´çš„æ•°å­¦è¡¨è¾¾

* ç¬¬ 1 ä¸ªäººç­‰å¾…æ—¶é—´ï¼š

$W_1 = 0$

* ç¬¬ ( i ) ä¸ªäººç­‰å¾…æ—¶é—´ï¼š

$W_i = \sum_{j=1}^{i-1} T_{\pi_j}$

---

### 3ï¸âƒ£ æ€»ç­‰å¾…æ—¶é—´

$\begin{aligned}
W_{\text{total}}
&= \sum_{i=1}^{n} W_i \
&= \sum_{i=1}^{n} \sum_{j=1}^{i-1} T_{\pi_j}
\end{aligned}$

äº¤æ¢æ±‚å’Œé¡ºåºï¼š

$W_{\text{total}} = \sum_{j=1}^{n} T_{\pi_j} \cdot (n - j)$

---

### 4ï¸âƒ£ å¹³å‡ç­‰å¾…æ—¶é—´

$W_{\text{avg}} = \frac{1}{n} \sum_{j=1}^{n} T_{\pi_j} \cdot (n - j)$

> ç»“è®ºï¼š
> å¹³å‡ç­‰å¾…æ—¶é—´ç”± **æ¥æ°´æ—¶é—´ä¸å…¶æ‰€åœ¨ä½ç½®çš„æƒé‡ä¹˜ç§¯** å†³å®šï¼Œ
> ä½ç½®è¶Šé å‰ï¼Œæƒé‡ ( (n - j) ) è¶Šå¤§ã€‚

---

### 5ï¸âƒ£ äº¤æ¢è®ºè¯ï¼ˆå…³é”®è¯æ˜ï¼‰

è€ƒè™‘ç›¸é‚»ä¸¤ä¸ªäººï¼š

* ç¬¬ $ k $ ä½ï¼šAï¼Œæ—¶é—´ $ T_A $
* ç¬¬ $ k+1 $ ä½ï¼šBï¼Œæ—¶é—´ $ T_B $

#### ä¸äº¤æ¢æ—¶çš„è´¡çŒ®

$C_1 = T_A (n-k) + T_B (n-k-1)$

#### äº¤æ¢åçš„è´¡çŒ®

$C_2 = T_B (n-k) + T_A (n-k-1)$

#### æ¯”è¾ƒå·®å€¼

$\begin{aligned}
C_1 - C_2
&= T_A - T_B
\end{aligned}$

---

### 6ï¸âƒ£ æ¨è®º

* è‹¥ $ T_A \le T_B $ï¼Œåˆ™ $ C_1 \le C_2 $
* å³ï¼š**æ—¶é—´è¾ƒçŸ­çš„äººæ’åœ¨å‰é¢ï¼Œä¸ä¼šå¢åŠ æ€»ç­‰å¾…æ—¶é—´**

é€šè¿‡ä¸æ–­äº¤æ¢æ‰€æœ‰â€œé€†åºå¯¹â€ï¼Œæœ€ç»ˆå¾—åˆ°ï¼š

> **æŒ‰æ¥æ°´æ—¶é—´éé€’å‡æ’åˆ—çš„é˜Ÿåˆ—æ˜¯å…¨å±€æœ€ä¼˜è§£**

---

## ç®—æ³•å®ç°æ€è·¯ï¼ˆä¸ä»£ç å¯¹åº”ï¼‰

### 1ï¸âƒ£ æ•°æ®ç»“æ„è®¾è®¡

```cpp
struct Person {
    long long time; // æ¥æ°´æ—¶é—´
    int id;         // åŸç¼–å·
};
```

* æ’åºåä»å¯è¾“å‡ºåŸå§‹ç¼–å·

---

### 2ï¸âƒ£ æ’åºç­–ç•¥

```cpp
sort(a.begin(), a.end(), [](const Person &x, const Person &y) {
    return x.time < y.time;
});
```

---

### 3ï¸âƒ£ ç­‰å¾…æ—¶é—´è®¡ç®—

```cpp
long long totalWait = 0;
long long sum = 0;

for (int i = 0; i < n; i++) {
    totalWait += sum;
    sum += a[i].time;
}
```

* `sum`ï¼šå‰é¢æ‰€æœ‰äººçš„æ¥æ°´æ—¶é—´ä¹‹å’Œ
* `totalWait`ï¼šæ‰€æœ‰äººçš„ç­‰å¾…æ—¶é—´æ€»å’Œ

---

### 4ï¸âƒ£ å¹³å‡ç­‰å¾…æ—¶é—´

```cpp
double avg = (double)totalWait / n;
```

---

## å¤æ‚åº¦åˆ†æ

### â± æ—¶é—´å¤æ‚åº¦

$O(n \log n)$

* æ’åºå ä¸»å¯¼

---

### ğŸ“¦ ç©ºé—´å¤æ‚åº¦

$O(n)$

* ä½¿ç”¨ç»“æ„ä½“æ•°ç»„å­˜å‚¨æ•°æ®

---

## æ˜“é”™ç‚¹ä¸æ³¨æ„äº‹é¡¹

### âš ï¸ æ˜“é”™ç‚¹ 1ï¼šæ’åºåç¼–å·ä¸¢å¤±

* å¿…é¡»ä¿å­˜åŸç¼–å· `id`
* ä¸èƒ½åªæ’åºæ—¶é—´

---

### âš ï¸ æ˜“é”™ç‚¹ 2ï¼šç­‰å¾…æ—¶é—´ç†è§£é”™è¯¯

* ç­‰å¾…æ—¶é—´ â‰  æ¥æ°´æ—¶é—´
* ç¬¬ ( i ) ä¸ªäººåªç­‰å¾… **å‰ ( i-1 ) ä¸ªäºº**

---

### âš ï¸ æ˜“é”™ç‚¹ 3ï¼šæ•´å‹æº¢å‡º

* ç´¯è®¡æ—¶é—´å¯èƒ½å¾ˆå¤§
* å¿…é¡»ä½¿ç”¨ `long long`

---

### è¾¹ç•Œæƒ…å†µ

* ( n = 1 )

  * æ’é˜Ÿé¡ºåºï¼š`1`
  * å¹³å‡ç­‰å¾…æ—¶é—´ï¼š`0.00`
